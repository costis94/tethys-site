---
const items = [
  { href: "/el/", label: "Αρχική" },
  { href: "/el/product", label: "Προϊόν" },
  { href: "/el/security", label: "Ασφάλεια" },
  { href: "/el/contact", label: "Επικοινωνία" },
];

const currentPath = Astro.url.pathname;
const isEnglish = currentPath.startsWith("/en");

const switchTo = isEnglish
  ? currentPath.replace(/^\/en/, "/el")
  : currentPath.replace(/^\/el/, "/en");

// Active link helper
function isActive(href: string) {
  return currentPath === href || (href !== "/el/" && currentPath.startsWith(href));
}
---

<header class="sticky top-0 z-50">
  <div class="border-b border-base-300 bg-base-100/80 backdrop-blur">
    <div class="container-page">
      <div class="h-16 flex items-center justify-between gap-4">

        <!-- Left: Brand -->
        <a href="/el/" class="flex items-center gap-3">
          <img src="/brand/logo.svg" alt="Tethys" class="h-10 w-auto" />
          <span class="hidden sm:inline font-semibold tracking-tight">Tethys</span>
        </a>

        <!-- Center: Desktop nav -->
        <nav class="hidden md:flex items-center gap-1">
          {items.map((it) => (
            <a
              href={it.href}
              class={`btn btn-ghost btn-md ${
                isActive(it.href) ? "btn-active font-medium" : ""
              }`}
            >
              {it.label}
            </a>
          ))}
        </nav>

        <!-- Right: actions -->
        <div class="hidden md:flex items-center gap-2">
          <a href={switchTo} class="btn btn-ghost btn-sm">
            {isEnglish ? "ΕΛ" : "EN"}
          </a>

          <a href="/el/contact" class="btn btn-primary btn-sm">
            Ζητήστε παρουσίαση
          </a>
        </div>

        <!-- Mobile: menu button -->
        <button
          id="mobile-toggle"
          class="md:hidden btn btn-ghost btn-sm"
          aria-label="Menu"
          aria-controls="mobile-menu"
          aria-expanded="false"
        >
          ☰
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden md:hidden border-t border-base-300">
      <div class="container-page py-4 flex flex-col gap-2">

        {items.map((it) => (
          <a
            href={it.href}
            class={`btn btn-ghost justify-start ${
              isActive(it.href) ? "btn-active font-medium" : ""
            }`}
          >
            {it.label}
          </a>
        ))}

        <div class="mt-2 flex items-center gap-2">
          <a href={switchTo} class="btn btn-outline btn-sm">
            {isEnglish ? "ΕΛ" : "EN"}
          </a>

          <a href="/el/contact" class="btn btn-primary btn-sm flex-1">
            Ζητήστε παρουσίαση
          </a>
        </div>

      </div>
    </div>
  </div>
</header>

<script>
  const btn = document.getElementById("mobile-toggle");
  const menu = document.getElementById("mobile-menu");

  btn?.addEventListener("click", () => {
    const isHidden = menu?.classList.toggle("hidden");
    btn?.setAttribute("aria-expanded", String(!isHidden));
  });
</script>
